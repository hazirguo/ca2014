---
layout: post
title: 第六次作业发布，请与5月9日交！
---

**第六次作业请在 5 月 9 日上课前交，逾期不再接收！**


## 3.18

Suppose we have a deeply pipelined processor, for which we implement a branch-target buffer for the conditional branches only. Assume that the
misprediction penalty is always four cycles and the buffer miss penalty is always
three cycles. Assume a 90% hit rate, 90% accuracy, and 15% branch frequency.
How much faster is the processor with the branch-target buffer versus a processor
that has a fixed two-cycle branch penalty? Assume a base clock cycle per instruction (CPI) without branch stalls of one.


## 3.19 

Consider a branch-target buffer that has penalties of zero, two, and
two clock cycles for correct conditional branch prediction, incorrect prediction,
and a buffer miss, respectively. Consider a branch-target buffer design that distin-
guishes conditional and unconditional branches, storing the target address for a
conditional branch and the target instruction for an unconditional branch.

a. What is the penalty in clock cycles when an unconditional branch
is found in the buffer?

b. Determine  the  improvement  from  branch  folding  for  unconditional branches. Assume a 90% hit rate, an unconditional branch frequency of
5%, and a two-cycle penalty for a buffer miss. How much improvement is
gained by this enhancement? How high must the hit rate be for this enhance-
ment to provide a performance gain?